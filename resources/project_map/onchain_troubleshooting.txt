# DUDE.BOX ONCHAIN TROUBLESHOOTING
Last Updated: November 29, 2024

## CORE PRINCIPLES

1. Trust the SDK
---------------
- Use Coinbase Wallet SDK's built-in functionality
- Avoid custom chain management
- Let SDK handle connection details and chain switching
- Use SDK preferences for wallet types (smartWalletOnly, eoaOnly)

2. State Management
------------------
- Keep state minimal (isConnected, address, error states)
- Let SDK manage chain state
- Clear connection lifecycle
- Simple error handling

3. Type System
-------------
- Match SDK's type definitions
- Keep interfaces simple and focused
- Avoid unnecessary type complexity
- Use SDK's provider types directly

## COMMON ISSUES & RESOLUTIONS

1. Chain Management
------------------
WRONG:
- Custom chain state management
- Manual chain switching logic
- Custom RPC handling

CORRECT:
- Use SDK's chain management
- Remove custom chain logic
- Trust SDK's built-in chain handling

2. State Complexity
------------------
WRONG:
- Complex wallet/chain state objects
- Manual chain tracking
- Duplicate state management

CORRECT:
- Minimal required state
- Let SDK handle chain state
- Focus on connection status

3. Error Handling
----------------
WRONG:
- Generic error messages
- Complex error state

CORRECT:
- Use SDK's error information
- Clear error messaging
- Simple error state

## FUTURE CONSIDERATIONS

1. SDK Updates
-------------
- Regular SDK version checks
- Update implementation based on SDK changes
- Monitor SDK release notes

2. Error Monitoring
-----------------
- Track connection success rates
- Monitor wallet type usage
- Log specific error types

3. Performance
-------------
- Monitor connection speeds
- Track state update efficiency
- Optimize error handling

## QUICK FIXES

1. Chain Selection Issues
- Remove custom chain selection
- Use SDK's chain management
- Default to Base Sepolia

2. Connection Problems
- Check SDK initialization
- Verify wallet preferences
- Confirm error handling

3. State Issues
- Simplify state object
- Remove chain tracking
- Trust SDK state