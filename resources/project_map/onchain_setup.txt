DUDE.BOX ONCHAIN SETUP
Last Updated: November 29, 2024

1. WALLET INTEGRATION
----------------
Primary SDK: @coinbase/wallet-sdk
Implementation: Direct SDK usage with preferences

Smart Wallet:
- One-click setup
- No extension required
- Uses smartWalletOnly option
- Email-based authentication

Regular Wallet:
- Traditional Web3 wallets
- Extension-based
- Uses eoaOnly option
- Support for Coinbase Wallet & MetaMask

2. ARCHITECTURE
----------------
Core Components:
/src/app/
├── context/
│   └── Web3Context.tsx    # Central wallet state management
├── components/
│   └── wallet/
│       ├── WalletOptions.tsx     # Wallet selection UI
│       ├── TransactionHistory.tsx # Transaction display
│       └── ...
└── onchain/
    └── page.tsx           # Main Web3 dashboard

3. STATE MANAGEMENT
----------------
Web3State Interface:
- isConnected: boolean
- address: string | null
- isConnecting: boolean
- error: string | null
- walletType: 'none' | 'smart' | 'regular'

Connection Flow:
1. User selects wallet type
2. SDK initializes with appropriate preferences
3. Connection request triggered
4. State updates with connection result

4. SECURITY CONSIDERATIONS
----------------
- No local storage of wallet data
- All Web3 operations through Coinbase SDK
- Proper error handling
- Connection state validation
- Mutual exclusivity of wallet types

5. USER EXPERIENCE
----------------
- Clear wallet type distinction
- Visual feedback for connection states
- Error messages in UI
- Disabled states for unavailable options
- Simple onboarding flow

6. DEPENDENCIES
----------------
Primary:
- @coinbase/wallet-sdk: ^4.2.3
- wagmi: ^2.13.2
- viem: ^2.21.52

7. NEXT STEPS
----------------
□ Implement transaction history
□ Add chain switching
□ Smart contract interactions
□ Token balances
□ NFT display