# DUDE.BOX MASTER PROJECT GUIDE
Last Updated: December 1, 2024

## IT Department (Claude) Responsibilities
- Maintain and update project documentation
- Focus on code review and technical implementation
- Minimize conversational exchanges to prioritize development tasks
- Review all changes against existing architecture
- Ensure all changes are properly documented
- Monitor and maintain project structure integrity
- Break down file operations into chunks (<50 lines) to avoid timeouts
- Keep documentation current with project state

## Project Structure
```
.
├── .env.local              # Environment variables
├── .eslintrc.json         # ESLint configuration
├── .next                  # Next.js build directory
├── components.json        # shadcn/ui components config
├── next.config.js         # Next.js configuration
├── package.json          # Project dependencies
├── postcss.config.mjs    # PostCSS configuration
├── tailwind.config.ts    # Tailwind CSS configuration
├── tsconfig.json         # TypeScript configuration
│
├── public/               # Static files
│   └── Dude logo 3.jpg  # Site logo
│
├── resources/           # Project resources
│   └── project_map/    # Project documentation
│
└── src/
    ├── app/           # Next.js 14 app directory
    │   ├── about/     # About page
    │   ├── api/       # API routes
    │   ├── components/# App-specific components
    │   │   ├── common/# Shared UI components
    │   │   ├── sections/# Page sections
    │   │   ├── CartContext.tsx
    │   │   ├── Client-Layout.tsx
    │   │   ├── Footer.tsx
    │   │   └── Header.tsx
    │   ├── config/    # App configuration
    │   ├── hooks/     # Custom hooks
    │   ├── layout.tsx # Root layout
    │   ├── page.tsx   # Homepage
    │   ├── providers.tsx # App providers
    │   ├── roadmap/   # Roadmap page
    │   └── shop/      # Shop page
```

## Environment Variables (.env.local)
```env
# Shopify Configuration
NEXT_PUBLIC_SHOPIFY_STORE_DOMAIN=
NEXT_PUBLIC_SHOPIFY_STOREFRONT_ACCESS_TOKEN=
NEXT_PUBLIC_SHOPIFY_API_KEY=

# Application URLs
NEXT_PUBLIC_APP_URL=

# Brave Search MCP Configuration
BRAVE_API_KEY=
```

## Startup Sequence
```powershell
# 1. Initialize MCP Servers
uvx mcp-server-sqlite --db-path "C:\Users\Alex Moore\Dude.Box\dude\test.db"
npx @modelcontextprotocol/server-filesystem "C:\Users\Alex Moore\Dude.Box\dude"
npx @modelcontextprotocol/server-brave-search

# 2. Clean Build (if needed)
Remove-Item -Recurse -Force .next -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force node_modules -ErrorAction SilentlyContinue
Remove-Item package-lock.json -ErrorAction SilentlyContinue
npm cache clean --force

# 3. Installation
npm install next@latest
npm install next-pwa
npm install

# 4. Development
npm run dev
```

## Core Dependencies
```json
{
  "dependencies": {
    "next": "^14.0.4",
    "next-pwa": "latest",
    "react": "18.2.0",
    "react-dom": "18.2.0",
    "@shopify/storefront-api-client": "latest",
    "@vercel/analytics": "^1.3.2",
    "@vercel/postgres": "^0.10.0",
    "@vercel/speed-insights": "^1.0.14",
    "tailwindcss": "^3.4.1",
    "shadcn-ui": "^0.2.3"
  }
}
```

## Key Components

### Header (src/app/components/Header.tsx)
- Site navigation
- Mobile responsive menu
- Logo display
- Shopping cart integration

### CartContext (src/app/components/CartContext.tsx)
- Shopping cart state management
- Cart operations (add, remove, update)
- Shopify integration

### Client-Layout (src/app/components/Client-Layout.tsx)
- Common layout wrapper
- Handles client-side rendering requirements
- Maintains consistent page structure

## Common Issues & Solutions

### Build Issues
1. next-pwa configuration:
   - Ensure proper installation
   - Check service worker configuration
   - Verify PWA manifest
   - Clear .next/cache if service worker issues persist

2. Next.js Compilation:
   - Use clean installation for dependency conflicts
   - Clear .next cache if build issues persist
   - Verify Node.js version compatibility

3. Environment Variables:
   - All required variables must be set
   - Shopify API keys must be valid
   - Check URL configurations
   - Verify .env.local file exists and is properly formatted

4. Shopify Integration:
   - Verify API access
   - Check storefront API version compatibility
   - Ensure proper cart initialization
   - Monitor API rate limits

## Documentation Standards
- Keep this guide updated with all project changes
- Document new features in appropriate sections
- Maintain clear startup instructions
- Track all configuration changes
- Keep file structure map current
- Break down file operations into manageable chunks
- Update dependencies list when changed
- Document all error resolutions for future reference